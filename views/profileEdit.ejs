<%- include('partials/header') -%>

<script>
    $(document).ready(function () {
        $("#saveprofile").click(function () {
            $.ajax({
                method: "POST",
                url: "/setprofile",
                dataType: "json",
                data: {
                    "firstname": $("#fname").val(),
                    "lastname": $("#lname").val(),
                    "bio": $("#bio").val(),
                    "image": null,
                },
                success: function (result, status) {
                    //alert(result);
                    location.href = "/profile";
                }
            });
        });
    });
</script>

<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="/profile">Back</a>
            <a class="navbar-brand" href="/cart">Cart</a>
            <a class="navbar-brand" href="/logout">Logout</a>
        </div>
    </div>
</nav>

<body>
    <h1>User Profile</h1>
    <p>This is your current information!</p>

    <div class="d-flex w-10 justify-content-center">
        <div class="d-flex flex-column align-items-center w-25">
            <img class="profilepic rounded m-3" src="data:image/png;base64,<%= userProf.profile.image %>" />
            <p>
                <label for="fname">First name:</label>
                <input type="text" id="fname" name="fname" placeholder="First Name"
                    value="<%= userProf.profile.firstname %>">
                <label for="lname">Last name:</label>
                <input type="text" id="lname" name="lname" placeholder="Last Name"
                    value="<%= userProf.profile.lastname %>">
            </p>
            <p>
                <textarea type="text" id="bio" placeholder="Bio"><%= userProf.profile.bio %></textarea>
            </p>
            <button id="saveprofile" class="btn btn-primary ml-auto"><span class="material-icons">save</span></a>
        </div>

    </div>
</body>


<%- include('partials/footer') -%>